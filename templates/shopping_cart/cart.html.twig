{% extends 'base.html.twig' %}

{% block body %}
    <form action="{{path('update-quantities')}}" method="POST">
        <table class="table table-hover table-responsive">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th class="text-center">Price</th>
                    <th class="text-center">Subtotal</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for product in cart_products %}
                <tr>
                    <td class="col-sm-8 col-md-6">
                        <div class="media">
                            <img alt="" src="{{product['url72']}}">
                            <div class="ml-2">
                                <h4>{{product['name']}}</h4>
                                <h5>{{product['subname']}}</h5>
                            </div>
                        </div>
                    </td>
                    <td class="col-sm-1 col-md-1">
                        <input class="form-control" min="0" name="amounts[{{product['id']}}]" type="number" value="{{product['amount']}}">
                    </td>
                    <td class="col-sm-1 col-md-1 text-center">
                        <strong>${{product['price']}}</strong>
                    </td>
                    <td class="col-sm-1 col-md-1 text-center">
                        <strong>${{product['total_price']}}</strong>
                    </td>
                    <td class="col-sm-1 col-md-1">
                        <a class="btn btn-danger" href="{{path('remove-from-cart',{id:product['id']})}}" onclick="return confirm('Delete the product from the cart?');" role="button">
                            Remove
                        </a>
                    </td>
                </tr>
                 {% endfor %}
                <tr>
                    <td></td>
                    <td></td>
                    <td>
                        <button class="btn btn-warning" type="submit">
                            <span>Update&nbsp;quantities</span>
                        </button>
                    </td>
                    <td class="text-right">
                        <h3>Total price:</h3>
                    </td>
                    <td class="text-right">
                        <h3>
                            <strong>${{total_price}}</strong>
                        </h3>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>
                        <a class="btn btn-info" href="{{path('products')}}" role="button">
                            Continue&nbsp;shopping
                        </a>
                    </td>
                    <td>
                        <a class="btn btn-success" href="{{path('checkout')}}" role="button">
                            Checkout
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
    </form>
{% endblock %}

